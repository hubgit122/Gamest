!function(a){"use strict";var b=[],c=function(b){return b.afCSS3AnimateId||(b.afCSS3AnimateId=a.uuid()),b.afCSS3AnimateId},d=function(b){return"string"==typeof b||b instanceof String?document.getElementById(b):a.is$(b)?b[0]:b},e=function(a,e){var f,g,h=d(a);return g=c(h),b[g]?(b[g].animate(e),f=b[g]):(f=i(h,e),b[g]=f),f};a.fn.css3Animate=function(a){!a.complete&&a.callback&&(a.complete=a.callback);var b=e(this[0],a);a.complete=null,a.sucess=null,a.failure=null;for(var c=1;c<this.length;c++)b.link(this[c],a);return b},a.css3AnimateQueue=function(){return new i.queue};var f=a.feat.cssTransformStart,g=a.feat.cssTransformEnd,h=a.feat.cssPrefix.replace(/-/g,"")+"TransitionEnd";h=a.os.fennec||""===a.feat.cssPrefix||a.os.ie?"transitionend":h,h=h.replace(h.charAt(0),h.charAt(0).toLowerCase());var i=function(){var c=function(d,e){if(!(this instanceof c))return new c(d,e);if(this.callbacksStack=[],this.activeEvent=null,this.countStack=0,this.isActive=!1,this.el=d,this.linkFinishedProxy=a.proxy(this.linkFinished,this),this.el){this.animate(e);var f=this;af(this.el).bind("destroy",function(){var a=f.el.afCSS3AnimateId;f.callbacksStack=[],b[a]&&delete b[a]})}};return c.prototype={animate:function(b){if(this.isActive&&this.cancel(),this.isActive=!0,!b)return window.alert("Please provide configuration options for animation of "+this.el.id),void 0;var d,e,c=!!b.addClass,i=numOnly(b.time);if(c)b.removeClass?af(this.el).replaceClass(b.removeClass,b.addClass):af(this.el).addClass(b.addClass);else{if(0===i&&(b.time=0),b.y||(b.y=0),b.x||(b.x=0),b.previous){var j=new a.getCssMatrix(this.el);b.y+=numOnly(j.f),b.x+=numOnly(j.e)}b.origin||(b.origin="0% 0%"),b.scale||(b.scale="1"),b.rotateY||(b.rotateY="0"),b.rotateX||(b.rotateX="0"),b.skewY||(b.skewY="0"),b.skewX||(b.skewX="0"),b.timingFunction||(b.timingFunction="linear"),("number"==typeof b.x||-1===b.x.indexOf("%")&&-1===b.x.toLowerCase().indexOf("px")&&-1===b.x.toLowerCase().indexOf("deg"))&&(b.x=parseInt(b.x,10)+"px"),("number"==typeof b.y||-1===b.y.indexOf("%")&&-1===b.y.toLowerCase().indexOf("px")&&-1===b.y.toLowerCase().indexOf("deg"))&&(b.y=parseInt(b.y,10)+"px");var k="translate"+f+b.x+","+b.y+g+" scale("+parseFloat(b.scale)+") rotate("+b.rotateX+")";a.os.opera||(k+=" rotateY("+b.rotateY+")"),k+=" skew("+b.skewX+","+b.skewY+")",this.el.style[a.feat.cssPrefix+"Transform"]=k,this.el.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden";var l=a.feat.cssPrefix+"Transform";void 0!==b.opacity&&(this.el.style.opacity=b.opacity,l+=", opacity"),b.width&&(this.el.style.width=b.width,l="all"),b.height&&(this.el.style.height=b.height,l="all"),this.el.style[a.feat.cssPrefix+"TransitionProperty"]="all",-1===(""+b.time).indexOf("s")?(d="ms",e=b.time+d):-1!==b.time.indexOf("ms")?(d="ms",e=b.time):(d="s",e=b.time+d),b.delay&&(this.el.style[a.feat.cssPrefix+"TransitionDelay"]=b.delay),this.el.style[a.feat.cssPrefix+"TransitionDuration"]=e,this.el.style[a.feat.cssPrefix+"TransitionTimingFunction"]=b.timingFunction,this.el.style[a.feat.cssPrefix+"TransformOrigin"]=b.origin}this.callbacksStack.push({complete:b.complete,success:b.success,failure:b.failure}),this.countStack++;var n,m=this,o=window.getComputedStyle(this.el);c&&(n=o[a.feat.cssPrefix+"TransitionDuration"],i=numOnly(n),b.time=i,-1!==n.indexOf("ms")?d="ms":(d="s",b.time*=1e3)),0===i||"ms"===d&&5>i||"none"===o.display?a.asap(a.proxy(this.finishAnimation,this,[!1])):(this.activeEvent=function(a){clearTimeout(m.timeout),m.finishAnimation(a),m.el.removeEventListener(h,m.activeEvent,!1)},m.timeout=setTimeout(this.activeEvent,numOnly(b.time)+50),this.el.addEventListener(h,this.activeEvent,!1))},addCallbackHook:function(a){return a&&this.callbacksStack.push(a),this.countStack++,this.linkFinishedProxy},linkFinished:function(a){a?this.cancel():this.finishAnimation()},finishAnimation:function(a){a&&a.preventDefault&&a.preventDefault(),this.isActive&&(this.countStack--,0===this.countStack&&this.fireCallbacks(!1))},fireCallbacks:function(a){this.clearEvents();var b=this.callbacksStack;this.cleanup();for(var c=0;c<b.length;c++){var d=b[c].complete,e=b[c].success,f=b[c].failure;"function"==typeof d&&d(a),a&&"function"==typeof f?f():"function"==typeof e&&e()}},cancel:function(){this.isActive&&this.fireCallbacks(!0)},cleanup:function(){this.callbacksStack=[],this.isActive=!1,this.countStack=0},clearEvents:function(){this.activeEvent&&this.el.removeEventListener(h,this.activeEvent,!1),this.activeEvent=null},link:function(a,b){var c={complete:b.complete,success:b.success,failure:b.failure};return b.complete=this.addCallbackHook(c),b.success=null,b.failure=null,e(a,b),b.complete=c.complete,b.success=c.success,b.failure=c.failure,this}},c}();i.queue=function(){return{elements:[],push:function(a){this.elements.push(a)},pop:function(){return this.elements.pop()},run:function(){var a=this;if(0!==this.elements.length){if("function"==typeof this.elements[0]){var b=this.shift();b()}if(0!==this.elements.length){var c=this.shift();this.elements.length>0&&(c.complete=function(b){b||a.run()}),i(document.getElementById(c.id),c)}}},shift:function(){return this.elements.shift()}}}}(af),Date.now||(Date.now=function(){"use strict";return(new Date).getTime()}),function(){"use strict";for(var a=["webkit","moz","ms"],b=0;b<a.length&&!window.requestAnimationFrame;++b){var c=a[b];window.requestAnimationFrame=window[c+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var d=0;window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(d+16,b);return setTimeout(function(){a(d=c)},c-b)},window.cancelAnimationFrame=clearTimeout}}(),function(a){"use strict";var b=[],c=function(b){return b.afAnimateId||(b.afAnimateId=a.uuid()),b.afAnimateId},d=function(b){return"string"==typeof b||b instanceof String?document.getElementById(b):a.is$(b)?b[0]:b},e=function(a,e){var g,h,i=d(a);return h=c(i),b[h]?(e&&b[h].animate(e),g=b[h]):(g=f(i,e),b[h]=g),g};a.fn.animate=function(a){var b=e(this[0],a);return b};var f=function(a,c){if(!(this instanceof f))return new f(a,c);if(this.el=a,this.el){c&&this.animate(c);var d=this;af(this.el).bind("destroy",function(){var a=d.el.afAnimateId;b[a]&&delete b[a]})}};f.prototype={animationTimer:null,isAnimating:!1,startX:0,startY:0,runTime:0,endX:0,endY:0,currX:0,currY:0,animationStartTime:0,pauseTime:0,completeCB:null,easingFn:"linear",animateOpts:{},updateCb:null,animate:function(b){var c=this;c.isAnimating||(c.isAnimating=!0,window.cancelAnimationFrame(c.animationTimer),b||(b={x:0,y:0,duration:0}),this.easingFn=b.easing||"linear",this.completeCB=b.complete||null,this.updateCB=b.update||null,this.runTime=numOnly(b.duration),b.complete&&delete b.complete,this.animateOpts=b,this.startTime=Date.now(),this.startMatrix=a.getCssMatrix(this.el),0===this.runTime&&this.doAnimate())},start:function(){this.doAnimate()},doAnimate:function(){var b,c,d,a=Date.now(),e=this;return 0===this.runTime||a>=this.startTime+this.runTime?(e.setPosition(this.animateOpts.x,this.animateOpts.y),e.isAnimating=!1,this.updateCB&&this.updateCB({x:this.animateOpts.x,y:this.animateOpts.y}),this.completeCB&&this.completeCB(),void 0):(a=(a-this.startTime)/this.runTime,a=a>1?1:a,d=g[this.easingFn](a),b=(this.animateOpts.x-this.startMatrix.e)*d+this.startMatrix.e,c=(this.animateOpts.y-this.startMatrix.f)*d+this.startMatrix.f,this.setPosition(b,c),this.updateCB&&this.updateCB({x:b,y:c}),this.isAnimating&&(this.animationTimer=window.requestAnimationFrame(function(){e.doAnimate()})),void 0)},setPosition:function(b,c){this.el.style[a.feat.cssPrefix+"Transform"]="matrix3d( 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+b+", "+c+", 0, 1 )",this.currX=b,this.currY=c},stop:function(){this.isAnimating=!1,window.cancelAnimationFrame(this.animationTimer),this.pauseTime=Date.now()-this.startTime},resume:function(){this.isAnimating=!0,this.startTime=Date.now()-this.pauseTime,this.doAnimate()}};var g={linear:function(a){return a},easeOutSine:function(a){return Math.sin(a*Math.PI/2)}}}(af);